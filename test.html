<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="./wquery.js"></script>
<body>
	<div></div>
	<div></div>
	<div></div>
	<div class="tic"></div>
	<a></a>
	<div></div>
	<a class="tic"></a>
	<div class="toc"></div>
	<a></a>
	<div id="test"></div>
	<a></a>
</body>
<script>
jQuery.noConflict();

jQuery( function(){

	var a1 = 0;
	var a2 = 0;

	var cJ = jQuery('div');
	var cW = wQuery('div');

	var dJ = jQuery('a');
	var dW = wQuery('a');

	var tests = [

		[

			'select tag  ',
			10000,

			function(){
				jQuery('div');
			},

			function(){
				wQuery('div');
			}

		],

		[

			'select id   ',
			10000,

			function(){
				jQuery('#test');
			},

			function(){
				wQuery('#test');
			}

		],

		[

			'select class',
			10000,

			function(){
				jQuery('.tic');
			},

			function(){
				wQuery('.tic');
			}

		],

		[

			'select class inside element',
			10000,

			function(){
				jQuery('body .tic');
			},

			function(){
				wQuery('body .tic');
			}

		],

		[

			'select element with class  ',
			10000,

			function(){
				jQuery('div.tic');
			},

			function(){
				wQuery('div.tic');
			}

		],

		[

			'add method     ',
			10000,

			function(){
				cJ.add( dJ );
			},

			function(){
				cW.add( dW );
			}

		],

		/*
		[

			'is method     ',
			10000,

			function(){
				cJ.is('div.toc');
			},

			function(){
				cW.is('div.toc');
			}

		],
		*/

		[

			'each method  ',
			10000,

			function(){
				cJ.each( function( i ){ a1 = 1 + i; } );
			},

			function(){
				cW.each( function( i ){ a1 = 1 + i; } );
			}

		],

		[

			'get method  ',
			10000,

			function(){
				cJ.get();
			},

			function(){
				cW.get();
			}

		],

		[

			'get(2) method  ',
			10000,

			function(){
				cJ.get(2);
			},

			function(){
				cW.get(2);
			}

		],

		[

			'parent method',
			10000,

			function(){
				cJ.parent();
			},

			function(){
				cW.parent();
			}

		],

		[

			'parents method ',
			10000,

			function(){
				cJ.parents();
			},

			function(){
				cW.parents();
			}

		],

		[

			'css method (get color property)    ',
			10000,

			function(){
				cJ.css('color');
			},

			function(){
				cW.css('color');
			}

		],

		[

			'css method (get transform property)',
			10000,

			function(){
				cJ.css('color');
			},

			function(){
				cW.css('color');
			}

		],

		[

			'css method (set color property)    ',
			10000,

			function(){
				cJ.css('color','#f00');
			},

			function(){
				cW.css('color','#f00');
			}

		],

	];

	var result = [];

	for( var i in tests ){

		result[ i ] = {

			name    : tests[ i ][ 0 ],
			samples : tests[ i ][ 1 ],
			jTime   : 0,
			wTime   : 0

		};

	}

	var loop  = 0;
	var loops = 10;
	var step  = 0;
	var steps = tests.length;

	var timeType = Boolean( window.performance );
	var timeFn = function(){

		if( timeType )
			return window.performance.now();
			return Date.now();

	};

	var inform = function(){

		var fn = null;

		for( var i in result ){

			result[ i ].jTime = result[ i ].jTime / loops;
			result[ i ].wTime = result[ i ].wTime / loops;

			fn = ( result[ i ].jTime < result[ i ].wTime ) ? console.warn : console.info;

			fn.call( console,

				result[ i ].name + ' | ' +
				loops + ' x ' + result[ i ].samples + ' samples | ' +
				'jQuery: ' + result[ i ].jTime.toFixed( 3 ) + 'ms | ' +
				'wQuery: ' + result[ i ].wTime.toFixed( 3 ) + 'ms | ' +
				'x' + ( result[ i ].jTime / result[ i ].wTime ).toFixed( 2 ) + ' times faster'

			);

			fn.call( console,

				'     ' +
				'jQuery: ' + parseInt( 1000 / ( result[ i ].jTime / result[ i ].samples ), 10 ) + ' ops/s | ' +
				'wQuery: ' + parseInt( 1000 / ( result[ i ].wTime / result[ i ].samples ), 10 ) + ' ops/s'

			);

		}

	};

	var startLoop = function(){

		if( ++loop < loops ){

			console.log('Completed ' + Math.round( ( loop / loops ) * 100 ) + '%');
			step = 0;
			next();

		}else{
			inform();
			alert('Test end');
		}
		
	};

	var next = function(){

		var fn1 = tests[ step ][ 2 ];
		var fn2 = tests[ step ][ 3 ];

		var t10 = timeFn();

		for( var i = 0, j = tests[ step ][ 1 ]; i < j ; i++ ){
			fn1();
		}

		var t11 = timeFn();
		var t20 = timeFn();

		for( var k = 0, l = tests[ step ][ 1 ]; k < l ; k++ ){
			fn2();
		}

		var t21 = timeFn();

		result[ step ].jTime += ( t11 - t10 );
		result[ step ].wTime += ( t21 - t20 );

		if( ++step < steps ){
			setTimeout( next );
		}else{
			startLoop();
		}

	}

	console.log('Starting');

	next();

});

</script>